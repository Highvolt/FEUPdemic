//walls collision group = 1

function populateFonts()
{      
      %font = "Minecraftia";      
      %sizes = "12 18 24 32 36 64";      
      for (%i = 0; %i < getWordCount(%sizes); %i++)            
            populateFontCacheRange(%font, getWord(%sizes, %i), 32, 126);      
      writeFontCache();
}


function feupDemic::create( %this )
{
	//activateDirectInput();
		enableWinConsole(true);
	exec("./scripts/scenewindow.cs");
	exec("./scripts/scene.cs");
	exec("./gui/guiProfiles.cs");
	
	exec(".scripts/menu.cs");
	exec(".scripts/pieChartGen.cs");
	exec(".scripts/area.cs");
	//populateFonts();
	
	feupDemic.zonesCount=0;

	%obj = new ScriptObject(Listener)  
	{  
	   //class="Listener";  
	};  
	createSidebar();
	configureSceneWindow();
	createScene();
	
	//myScene.setDebugOn("fps collision");
	
	mySceneWindow.setScene(myScene);
	mySceneWindow.setUseObjectInputEvents(true);
	createGrass();
	
	SceneWindow.UseObjectInputEvents = true;  
	//mySceneWindow.setUseInputEvents();
	mySceneWindow.addInputListener(%obj);

createArea(1, "-345 18;-361 34 -329 34 -329 1 -361 1,-320 19;-311 23 -311 19 -312 19 -312 13 -313 13 -313 12 -315 12 -315 9 -317 9 -317 10 -318 10 -318 11 -322 11 -322 12 -326 12 -326 13 -328 13 -328 28 -327 28 -327 27 -323 27 -323 26 -319 26 -319 25 -315 25 -315 24 -312 24 -312 23,-323 1;-318 9 -318 8 -319 8 -319 3 -320 3 -320 -1 -321 -1 -321 -6 -322 -6 -322 -11 -323 -11 -323 -14 -324 -14 -324 -13 -325 -13 -325 -12 -327 -12 -327 -10 -326 -10 -326 -5 -324 -5 -324 -0 -323 -0 -323 3 -326 3 -326 4 -328 4 -328 12 -327 12 -327 11 -323 11 -323 10 -319 10 -319 9,-312 -19;-288 -26 -288 -29 -289 -29 -289 -35 -290 -35 -290 -42 -292 -42 -292 -45 -295 -45 -295 -43 -303 -43 -303 -42 -311 -42 -311 -41 -319 -41 -319 -40 -327 -40 -327 -39 -335 -39 -335 -38 -338 -38 -338 -35 -337 -35 -337 -31 -336 -31 -336 -26 -335 -26 -335 -22 -334 -22 -334 -17 -332 -17 -332 -14 -331 -14 -331 -13 -326 -13 -326 -15 -322 -15 -322 -12 -321 -12 -321 -7 -320 -7 -320 -2 -319 -2 -319 2 -318 2 -318 7 -317 7 -317 8 -314 8 -314 11 -312 11 -312 12 -311 12 -311 18 -305 18 -305 16 -302 16 -302 15 -297 15 -297 13 -296 13 -296 12 -297 12 -297 8 -298 8 -298 4 -299 4 -299 -0 -301 -0 -301 -4 -302 -4 -302 -8 -303 -8 -303 -12 -304 -12 -304 -16 -305 -16 -305 -18 -304 -18 -304 -21 -305 -21 -305 -24 -301 -24 -301 -25 -292 -25 -292 -26");
createArea(2, "-301 60;-265 67 -265 63 -267 63 -267 54 -268 54 -268 51 -270 51 -270 52 -274 52 -274 53 -277 53 -277 54 -306 54 -306 45 -324 45 -324 42 -328 42 -328 52 -323 52 -323 56 -328 56 -328 70 -276 70 -276 67");
createArea(3, "-280 -30;-272 -29 -272 -32 -273 -32 -273 -34 -277 -34 -277 -33 -282 -33 -282 -32 -288 -32 -288 -29 -287 -29 -287 -26 -286 -26 -286 -27 -279 -27 -279 -29,-69 -46;-69 -43 -68 -43 -68 -47 -71 -47 -71 -45 -69 -45,-64 -36;-64 -38 -65 -38 -65 -36 -64 -36 -64 -35 -62 -35 -62 -36 -63 -36 -63 -37 -64 -37,-70 -42;-70 -41 -69 -41 -69 -42 -70 -42,-67 -40;-67 -41 -69 -41 -69 -40 -68 -40 -68 -39 -67 -39 -67 -38 -65 -38 -65 -39 -66 -39 -66 -40 -67 -40,-74 -47;-74 -48 -76 -48 -76 -47 -75 -47 -75 -46 -73 -46 -73 -47 -74 -47,-72 -44;-72 -46 -73 -46 -73 -43 -71 -43 -71 -42 -70 -42 -70 -44 -72 -44,-98 -30;-99 -28 -98 -28 -98 -33 -99 -33,-97 -36;-96 -36 -96 -40 -97 -40 -97 -37 -98 -37 -98 -33 -97 -33 -97 -36,-139 -71;-3 -88 -3 -89 -4 -89 -4 -93 -5 -93 -5 -98 -6 -98 -6 -101 -7 -101 -7 -106 -9 -106 -9 -110 -10 -110 -10 -115 -11 -115 -11 -118 -12 -118 -12 -123 -13 -123 -13 -127 -14 -127 -14 -129 -15 -129 -15 -127 -20 -127 -20 -126 -23 -126 -23 -125 -28 -125 -28 -124 -31 -124 -31 -123 -36 -123 -36 -122 -37 -122 -37 -121 -36 -121 -36 -116 -35 -116 -35 -113 -34 -113 -34 -109 -32 -109 -32 -105 -31 -105 -31 -101 -30 -101 -30 -98 -29 -98 -29 -93 -28 -93 -28 -91 -30 -91 -30 -90 -35 -90 -35 -89 -39 -89 -39 -88 -43 -88 -43 -87 -47 -87 -47 -85 -52 -85 -52 -84 -54 -84 -54 -87 -55 -87 -55 -91 -56 -91 -56 -96 -57 -96 -57 -100 -59 -100 -59 -105 -60 -105 -60 -109 -61 -109 -61 -114 -62 -114 -62 -115 -64 -115 -64 -114 -69 -114 -69 -113 -73 -113 -73 -112 -78 -112 -78 -110 -82 -110 -82 -109 -85 -109 -85 -108 -84 -108 -84 -104 -82 -104 -82 -99 -81 -99 -81 -96 -80 -96 -80 -91 -79 -91 -79 -87 -78 -87 -78 -84 -80 -84 -80 -83 -85 -83 -85 -82 -88 -82 -88 -81 -93 -81 -93 -80 -96 -80 -96 -79 -101 -79 -101 -77 -103 -77 -103 -83 -104 -83 -104 -91 -105 -91 -105 -100 -106 -100 -106 -104 -110 -104 -110 -102 -119 -102 -119 -101 -127 -101 -127 -100 -130 -100 -130 -97 -129 -97 -129 -89 -128 -89 -128 -81 -127 -81 -127 -73 -126 -73 -126 -68 -130 -68 -130 -67 -139 -67 -139 -66 -147 -66 -147 -65 -152 -65 -152 -70 -153 -70 -153 -77 -154 -77 -154 -85 -155 -85 -155 -93 -156 -93 -156 -97 -160 -97 -160 -96 -168 -96 -168 -95 -176 -95 -176 -93 -179 -93 -179 -90 -178 -90 -178 -82 -177 -82 -177 -74 -176 -74 -176 -66 -174 -66 -174 -62 -179 -62 -179 -60 -187 -60 -187 -59 -196 -59 -196 -58 -201 -58 -201 -63 -202 -63 -202 -71 -203 -71 -203 -79 -204 -79 -204 -87 -205 -87 -205 -90 -209 -90 -209 -89 -217 -89 -217 -88 -226 -88 -226 -87 -229 -87 -229 -83 -228 -83 -228 -75 -227 -75 -227 -67 -226 -67 -226 -59 -224 -59 -224 -55 -229 -55 -229 -54 -237 -54 -237 -52 -246 -52 -246 -51 -251 -51 -251 -56 -252 -56 -252 -64 -253 -64 -253 -72 -254 -72 -254 -80 -255 -80 -255 -83 -259 -83 -259 -82 -267 -82 -267 -81 -274 -81 -274 -80 -278 -80 -278 -76 -277 -76 -277 -67 -276 -67 -276 -58 -274 -58 -274 -50 -273 -50 -273 -41 -272 -41 -272 -33 -271 -33 -271 -29 -268 -29 -268 -30 -260 -30 -260 -31 -252 -31 -252 -32 -244 -32 -244 -33 -236 -33 -236 -34 -229 -34 -229 -35 -221 -35 -221 -37 -213 -37 -213 -38 -205 -38 -205 -39 -197 -39 -197 -40 -189 -40 -189 -41 -181 -41 -181 -42 -173 -42 -173 -43 -165 -43 -165 -45 -157 -45 -157 -46 -149 -46 -149 -47 -143 -47 -143 -48 -135 -48 -135 -49 -127 -49 -127 -50 -119 -50 -119 -51 -111 -51 -111 -52 -103 -52 -103 -54 -94 -54 -94 -48 -95 -48 -95 -45 -96 -45 -96 -40 -95 -40 -95 -43 -94 -43 -94 -45 -87 -45 -87 -43 -86 -43 -86 -40 -85 -40 -85 -36 -84 -36 -84 -33 -83 -33 -83 -28 -81 -28 -81 -26 -80 -26 -80 -29 -81 -29 -81 -33 -82 -33 -82 -38 -84 -38 -84 -42 -85 -42 -85 -47 -82 -47 -82 -48 -80 -48 -80 -49 -77 -49 -77 -48 -76 -48 -76 -55 -74 -55 -74 -57 -72 -57 -72 -60 -70 -60 -70 -62 -65 -62 -65 -63 -61 -63 -61 -64 -56 -64 -56 -65 -52 -65 -52 -66 -47 -66 -47 -67 -43 -67 -43 -68 -39 -68 -39 -70 -35 -70 -35 -71 -30 -71 -30 -72 -26 -72 -26 -73 -21 -73 -21 -74 -16 -74 -16 -75 -12 -75 -12 -76 -9 -76 -9 -79 -10 -79 -10 -81 -11 -81 -11 -85 -9 -85 -9 -87 -4 -87 -4 -88,-90 -30;-81 -21 -81 -23 -82 -23 -82 -27 -84 -27 -84 -32 -85 -32 -85 -35 -86 -35 -86 -39 -87 -39 -87 -42 -88 -42 -88 -44 -93 -44 -93 -42 -94 -42 -94 -39 -95 -39 -95 -35 -96 -35 -96 -32 -97 -32 -97 -27 -98 -27 -98 -23 -99 -23 -99 -21,-74 -34;-61 -30 -61 -31 -62 -31 -62 -32 -63 -32 -63 -33 -64 -33 -64 -34 -65 -34 -65 -35 -66 -35 -66 -37 -68 -37 -68 -38 -69 -38 -69 -39 -70 -39 -70 -40 -71 -40 -71 -41 -72 -41 -72 -42 -74 -42 -74 -45 -76 -45 -76 -46 -77 -46 -77 -47 -78 -47 -78 -48 -79 -48 -79 -47 -81 -47 -81 -46 -84 -46 -84 -43 -83 -43 -83 -39 -81 -39 -81 -34 -80 -34 -80 -30 -79 -30 -79 -25 -78 -25 -78 -22 -74 -22 -74 -23 -72 -23 -72 -24 -71 -24 -71 -25 -69 -25 -69 -26 -66 -26 -66 -27 -65 -27 -65 -29 -63 -29 -63 -30,-62 -46;-49 -47 -49 -50 -53 -50 -53 -51 -57 -51 -57 -52 -62 -52 -62 -54 -66 -54 -66 -55 -69 -55 -69 -56 -70 -56 -70 -57 -71 -57 -71 -56 -73 -56 -73 -54 -75 -54 -75 -49 -73 -49 -73 -48 -72 -48 -72 -47 -71 -47 -71 -45 -69 -45 -69 -43 -68 -43 -68 -42 -66 -42 -66 -41 -65 -41 -65 -40 -64 -40 -64 -39 -63 -39 -63 -38 -62 -38 -62 -37 -61 -37 -61 -35 -60 -35 -60 -34 -59 -34 -59 -33 -57 -33 -57 -35 -56 -35 -56 -38 -55 -38 -55 -39 -54 -39 -54 -41 -53 -41 -53 -43 -52 -43 -52 -45 -51 -45 -51 -47");
createArea(4, "-232 27;-194 16 -194 -4 -232 -4 -232 -5 -244 -5 -244 9 -254 9 -254 71 -244 71 -244 67 -239 67 -239 71 -229 71 -229 16");
createArea(5, "-181 33;-169 71 -169 -5 -192 -5 -192 -4 -193 -4 -193 71 -184 71 -184 67 -179 67 -179 71");
createArea(6, "-121 30;-76 66 -76 56 -93 56 -93 15 -94 15 -94 -5 -168 -5 -168 16 -143 16 -143 27 -141 27 -141 71 -131 71 -131 85 -129 85 -129 71 -118 71 -118 67 -87 67 -87 66,-81 4;-93 14 -69 14 -69 -6 -93 -6");
createArea(7, "-25 118;-34 126 -16 126 -16 110 -34 110,-21 108;-24 109 -18 109 -18 107 -24 107,-41 96;-66 106 -16 106 -16 86 -66 86,-54 34;-41 71 -41 -5 -66 -5 -66 71 -55 71 -55 85 -53 85 -53 71,-10 30;9 71 9 11 -7 11 -7 -5 -40 -5 -40 16 -15 16 -15 71 -5 71 -5 68 -1 68 -1 71");
createArea(8, "-4 -24;14 -6 14 -7 13 -7 13 -12 12 -12 12 -16 11 -16 11 -21 10 -21 10 -24 9 -24 9 -29 7 -29 7 -33 6 -33 6 -38 5 -38 5 -42 4 -42 4 -43 2 -43 2 -42 -3 -42 -3 -41 -9 -41 -9 -42 -13 -42 -13 -43 -18 -43 -18 -45 -19 -45 -19 -12 -18 -12 -18 -13 -13 -13 -13 -14 -9 -14 -9 -15 -6 -15 -6 -6");
createArea(9, "40 28;60 71 60 -5 59 -5 59 -4 54 -4 54 -2 49 -2 49 -1 46 -1 46 -0 41 -0 41 1 37 1 37 2 35 2 35 -5 32 -5 32 -4 28 -4 28 -2 23 -2 23 -1 19 -1 19 -0 15 -0 15 -4 14 -4 14 -5 -6 -5 -6 10 36 10 36 71 46 71 46 85 48 85 48 71");
createArea(10, "35 127;60 168 60 86 10 86 10 106 11 106 11 110 10 110 10 123 11 123 11 127 10 127 10 143 11 143 11 148 10 148 10 160 11 160 11 165 10 165 10 168");
createArea(11, "47 236;41 243 53 243 53 229 41 229,58 228;68 235 68 234 66 234 66 230 65 230 65 226 64 226 64 221 63 221 63 220 58 220 58 221 54 221 54 222 53 222 53 223 49 223 49 224 47 224 47 228 54 228 54 238 56 238 56 237 61 237 61 236 65 236 65 235,59 224;72 236 72 235 71 235 71 231 70 231 70 227 69 227 69 223 68 223 68 219 66 219 66 215 65 215 65 213 64 213 64 215 60 215 60 216 55 216 55 217 52 217 52 218 47 218 47 219 43 219 43 220 41 220 41 221 43 221 43 228 46 228 46 223 48 223 48 221 53 221 53 220 57 220 57 219 62 219 62 218 64 218 64 220 65 220 65 225 66 225 66 229 68 229 68 233 69 233 69 236 66 236 66 237 62 237 62 238 57 238 57 240 63 240 63 238 68 238 68 237 71 237 71 236");
createArea(12, "13 268;35 268 35 252 -6 252 -6 285 27 285 27 268,14 231;-6 245 35 245 35 217 -6 217,14 214;-6 216 35 216 35 213 -6 213");
createArea(13, "-67 227;-43 237 -43 217 -93 217 -93 225 -91 225 -91 237,-68 214;-93 216 -43 216 -43 213 -93 213,-59 244;-43 252 -43 238 -82 238 -82 243 -79 243 -79 244 -76 244 -76 245 -72 245 -72 246 -70 246 -70 248 -66 248 -66 249 -63 249 -63 250 -61 250 -61 251 -59 251 -59 252,-47 256;-43 261 -43 253 -54 253 -54 254 -53 254 -53 256 -51 256 -51 257 -49 257 -49 258 -48 258 -48 259 -46 259 -46 260 -45 260 -45 261");
createArea(14, "-53 121;-39 120 -39 110 -62 110 -62 135 -48 135 -48 120");
createArea(15, "-105 127;-66 168 -66 107 -68 107 -68 91 -76 91 -76 86 -143 86 -143 168");
createArea(16, "-174 119;-169 132 -169 106 -180 106 -180 126 -178 126 -178 132,-174 103;-177 104 -171 104 -171 102 -177 102,-174 96;-179 101 -169 101 -169 91 -179 91,-190 96;-193 101 -186 101 -186 90 -193 90");
createArea(17, "40 -79;64 -64 64 -71 63 -71 63 -75 62 -75 62 -80 61 -80 61 -84 60 -84 60 -89 59 -89 59 -93 57 -93 57 -98 56 -98 56 -102 49 -102 49 -101 47 -101 47 -100 41 -100 41 -99 38 -99 38 -98 34 -98 34 -97 30 -97 30 -96 26 -96 26 -95 22 -95 22 -93 18 -93 18 -87 15 -87 15 -85 16 -85 16 -81 18 -81 18 -76 19 -76 19 -72 20 -72 20 -68 21 -68 21 -64 22 -64 22 -59 23 -59 23 -55 30 -55 30 -56 35 -56 35 -58 38 -58 38 -59 43 -59 43 -60 47 -60 47 -62 52 -62 52 -63 60 -63 60 -64");
createArea(18, "-37 -247;-1 -243 -1 -245 -2 -245 -2 -246 -4 -246 -4 -247 -5 -247 -5 -248 -6 -248 -6 -249 -7 -249 -7 -250 -8 -250 -8 -252 -9 -252 -9 -253 -10 -253 -10 -256 -9 -256 -9 -259 -10 -259 -10 -261 -13 -261 -13 -262 -14 -262 -14 -263 -15 -263 -15 -264 -16 -264 -16 -265 -18 -265 -18 -266 -19 -266 -19 -267 -21 -267 -21 -269 -22 -269 -22 -270 -23 -270 -23 -271 -24 -271 -24 -272 -25 -272 -25 -273 -26 -273 -26 -274 -27 -274 -27 -275 -30 -275 -30 -276 -31 -276 -31 -278 -32 -278 -32 -279 -33 -279 -33 -280 -35 -280 -35 -281 -36 -281 -36 -283 -37 -283 -37 -284 -39 -284 -39 -285 -41 -285 -41 -287 -42 -287 -42 -288 -43 -288 -43 -289 -44 -289 -44 -290 -48 -290 -48 -288 -49 -288 -49 -287 -50 -287 -50 -285 -51 -285 -51 -284 -53 -284 -53 -283 -47 -283 -47 -282 -45 -282 -45 -281 -44 -281 -44 -276 -47 -276 -47 -275 -48 -275 -48 -274 -49 -274 -49 -273 -50 -273 -50 -271 -51 -271 -51 -270 -52 -270 -52 -269 -53 -269 -53 -267 -54 -267 -54 -266 -56 -266 -56 -265 -57 -265 -57 -264 -58 -264 -58 -263 -59 -263 -59 -262 -60 -262 -60 -259 -61 -259 -61 -258 -62 -258 -62 -257 -64 -257 -64 -256 -65 -256 -65 -255 -66 -255 -66 -254 -67 -254 -67 -253 -68 -253 -68 -252 -69 -252 -69 -249 -70 -249 -70 -248 -71 -248 -71 -247 -73 -247 -73 -246 -74 -246 -74 -245 -75 -245 -75 -244 -76 -244 -76 -242 -75 -242 -75 -241 -74 -241 -74 -241 -73 -240 -73 -239 -69 -239 -69 -238 -67 -238 -67 -237 -66 -237 -66 -236 -65 -236 -65 -234 -64 -234 -64 -233 -62 -233 -62 -232 -61 -232 -61 -231 -60 -231 -60 -230 -59 -230 -59 -228 -58 -228 -58 -227 -57 -227 -57 -225 -53 -225 -53 -224 -52 -224 -52 -223 -51 -223 -51 -222 -50 -222 -50 -221 -49 -221 -49 -219 -48 -219 -48 -217 -47 -217 -47 -216 -44 -216 -44 -217 -42 -217 -42 -216 -40 -216 -40 -215 -39 -215 -39 -214 -38 -214 -38 -213 -36 -213 -36 -212 -35 -212 -35 -211 -34 -211 -34 -210 -31 -210 -31 -211 -30 -211 -30 -212 -28 -212 -28 -213 -27 -213 -27 -215 -26 -215 -26 -216 -25 -216 -25 -217 -24 -217 -24 -219 -23 -219 -23 -220 -22 -220 -22 -221 -21 -221 -21 -222 -19 -222 -19 -223 -18 -223 -18 -224 -17 -224 -17 -225 -16 -225 -16 -228 -15 -228 -15 -230 -14 -230 -14 -231 -13 -231 -13 -232 -11 -232 -11 -233 -10 -233 -10 -234 -9 -234 -9 -236 -8 -236 -8 -237 -6 -237 -6 -238 -5 -238 -5 -241 -4 -241 -4 -242 -2 -242 -2 -243");
createArea(19, "-191 -291;-162 -295 -162 -297 -167 -297 -167 -298 -173 -298 -173 -299 -181 -299 -181 -300 -188 -300 -188 -301 -195 -301 -195 -305 -197 -305 -197 -309 -201 -309 -201 -310 -210 -310 -210 -312 -215 -312 -215 -304 -210 -304 -210 -302 -206 -302 -206 -298 -207 -298 -207 -291 -209 -291 -209 -284 -210 -284 -210 -277 -211 -277 -211 -274 -206 -274 -206 -276 -202 -276 -202 -273 -203 -273 -203 -272 -199 -272 -199 -271 -195 -271 -195 -274 -194 -274 -194 -281 -193 -281 -193 -285 -186 -285 -186 -284 -180 -284 -180 -283 -173 -283 -173 -282 -172 -282 -172 -279 -171 -279 -171 -277 -169 -277 -169 -279 -168 -279 -168 -281 -165 -281 -165 -283 -164 -283 -164 -289 -163 -289 -163 -295,-226 -265;-219 -263 -219 -266 -221 -266 -221 -267 -228 -267 -228 -268 -232 -268 -232 -266 -234 -266 -234 -264 -231 -264 -231 -263 -223 -263 -223 -262 -220 -262 -220 -263");

	//createArea(2, "0 0;10 10 -10 10 -10 -10 10 -10,100 100;10 10 -10 10 -10 -10 10 -10");
	//createArea(3, "200 200;10 10 -10 10 -10 -10 10 -10,200 -200;10 10 -10 10 -10 -10 10 -10");
	drawAreas();

	populatePie();
	echoInputState();

	/*%shape=new ShapeVector(){
		Angle=90;
		CircleRadius=100;
		isCircle=true;
		Position="0 0";
	};
	myScene.add(%shape);*/



	//Canvas.BackgroundColor = "Black";
	//echo(Canvas.getMouseControl());
	//mySceneWindow.setLockMouse(true);	
	
	echo(mySceneWindow.getLockMouse());

}




function populatePie(){
	%pieData=createPieChart("50 25 25",0.5);
if(%pieData!$=""){
	%len=getUnitCount(%pieData,",");
	for(%i=0;%i<%len;%i++){
		//echo(getUnit(%pieData,%i,","));
		%vals=getUnit(%pieData,%i,",");
		%shape=new ShapeVector(){
			//Angle=90;
			Size="1 1";
			CircleRadius=20;
			isCircle=false;
			Position="0 0";
			PolyList=%vals;
			FillMode=true;
		};

		%shape.setPolyCustom(getWordCount(%vals)/2,%vals);
		//echo(getWordCount(%vals)/2);
		//echo(%shape.getPoly());
		//myScene.add(%shape);
		if(%i==0){
			%shape.setFillColor("0.0 0.0 1.0");
			wellChart.setSceneObject(%shape);
			//wellChart.setCaption("1");
		}else if(%i==1){
			%shape.setFillColor("1.0 0.0 0.0");
			infectedChart.setSceneObject(%shape);
		}else{
			%shape.setFillColor("0.0 0.0 0.0");
			deadChart.setSceneObject(%shape);
		}
	}
}
}

function feupDemic::destroy( %this )
{
	destroySceneWindow();
}


function createGrass(){

   new Sprite(grass);
 	 grass.setBodyType( static );
    grass.Size = "1000" SPC "640";
    
    // Set the position.
    grass.setPosition("0 0");
	grass.SceneLayer = "31";
   
    grass.Image = "feupDemic:grass";
            
    
    myScene.add( grass );   
}

function Sprite::onTouchDown(%this, %touchid, %worldposition)  
{  
	echo("click Sprite");
	 
	//mySceneWindow.setCameraPosition(-getWord(%worldposition,0),-getWord(%worldposition,1));
}

function mySceneWindow::onTouchUp(%this, %touchID, %worldPosition)  
{  
	//echo("click");
	//mySceneWindow.setCameraPosition(-getWord(%worldposition,0),-getWord(%worldposition,1));
}  



function SceneWindow::onMouseWheelUp(%this, %modifier, %mousePoint, %mouseClickCount)
{  
	echo(%this.getMousePosition());
	mySceneWindow.setCameraZoom(mySceneWindow.getCameraZoom()+0.5);
	mySceneWindow.setCameraPosition(%mousePoint);
} 


function SceneWindow::onMouseWheelDown(%this, %modifier, %mousePoint, %mouseClickCount)
{  
	//echo("down");
	if(mySceneWindow.getCameraZoom()-0.5<=0){
		mySceneWindow.setCameraZoom(0.5);
		mySceneWindow.setCameraPosition(0,0);
	}else{
		mySceneWindow.setCameraZoom(mySceneWindow.getCameraZoom()-0.5);
		mySceneWindow.setCameraPosition(%mousePoint);
	}

} 



function SceneWindow::onTouchDown(%this, %touchid, %worldposition)  
{  
	//echo("click");
	 %this.OldTouchPosition = %worldposition;
	 %this.OldCameraPosition= mySceneWindow.getCameraPosition();
	/* %ret=myScene.pickPoint(%worldposition,"","","any");
	 echo(%ret);
	 if(%ret!$=""){
	 	%len=getWordCount(%ret);
	 	for(%i=0;%i<%len;%i++){
	 		%obj=getWord(%ret,%i);
	 		if(%obj.id_Area){
	 			echo(%obj.id_Area);
	 		}
	 	}
	 }*/
	//mySceneWindow.setCameraPosition(-getWord(%worldposition,0),-getWord(%worldposition,1));
}  


function SceneWindow::onTouchDragged(%this, %touchid, %worldposition)  
{  
	//echo("drag" SPC %worldposition SPC "#" SPC %touchid SPC getRealTime());
	//mySceneWindow.setCameraPosition(-getWord(%worldposition,0),-getWord(%worldposition,1));

	%panOffset = Vector2Sub( %worldposition, %this.OldTouchPosition);

    %camOffset= Vector2Sub( mySceneWindow.getCameraPosition(), %this.OldCameraPosition);
    //%panOffset = Vector2Inverse( %panOffset );

    
    //%panOffset = Vector2Mult( %panOffset, mySceneWindow.getCameraWorldScale() );
    
    //echo(%panOffset);
    %this.OldCameraPosition= mySceneWindow.getCameraPosition();
    mySceneWindow.setCameraPosition( Vector2Add(Vector2Sub( mySceneWindow.getCameraPosition(), %panOffset ),%camOffset));
     %this.OldTouchPosition = %worldposition;

}  


